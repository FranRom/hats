import React from "react";
import classNames from "classnames";
import { AccordionContext, ICardData } from "./VulnerabilityAccordion";
import ArrowIcon from "../../assets/icons/arrow.icon";
import CheckmarkIcon from "../../assets/icons/checkmark.icon";
import "../../styles/Vulnerability/AccordionCard.scss";

interface IProps {
  id: number
  title: string
  data: ICardData
  children: React.ReactNode
}

export default function AccordionCard(props: IProps) {
  const { id, title, data } = props;
  const { currentCard, toggleCard } = React.useContext(AccordionContext);
  const collapsed = currentCard !== id;

  const cardContentClass = classNames({
    "card-content-wrapper": true,
    "collapsed": collapsed
  })

  return <div className="accordion-card-wrapper">
    <div className="top-wrapper" onClick={() => toggleCard(id)}>
      <span className="card-number">{data.verified ? <CheckmarkIcon /> : id}</span>
      <span className={collapsed ? "card-title" : "card-title open"}>{title}</span>
      <div className={collapsed ? "arrow" : "arrow open"}><ArrowIcon /></div>
    </div>
    <div className={cardContentClass}>{props.children}</div>
  </div>
}
